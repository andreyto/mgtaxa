<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Mgtaxa: MGT::Util::PopenStdinProxy Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>MGT</b>::<b>Util</b>::<a class="el" href="classMGT_1_1Util_1_1PopenStdinProxy.html">PopenStdinProxy</a></div>
<h1>MGT::Util::PopenStdinProxy Class Reference</h1><!-- doxytag: class="MGT::Util::PopenStdinProxy" --><a href="classMGT_1_1Util_1_1PopenStdinProxy-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment">Proxy class to use in place of Popen.stdin - it makes sure than after stdin.close(), .wait() is called on the subprocess.
When Python exits, it apparently terminates still running subprocesses (maybe SGE does it - I only observed the issue in
batch execution. In particular, when we call .close() on a pipe to gzip subprocess writer, it takes some time for gzip
to finish writing. It our application exits immediately, gzip is killed leaving unfinished output file.
This proxy class holds a reference to the Popen instance and delegates all attribute lookups to Popen's stdin file object,
except for the .close() method, in which it first closes the stream, and then waits for the child process to finish.
This is not ideal solution because Popen.stdin is a real built-in file object, and this proxy class is not. Thus, some
code that e.g. uses Python C Api can choke on it. Another alternative would be to keep a global list of all Popen
objects and wait on them in atexit() handler.
</pre></div> 
<p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>mgtaxa/MGT/Util.py</ul>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 8 15:32:21 2010 for Mgtaxa by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
