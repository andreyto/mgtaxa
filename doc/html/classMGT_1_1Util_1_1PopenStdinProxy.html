<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mgtaxa: MGT::Util::PopenStdinProxy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><b>MGT</b>      </li>
      <li><b>Util</b>      </li>
      <li><a class="el" href="classMGT_1_1Util_1_1PopenStdinProxy.html">PopenStdinProxy</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>MGT::Util::PopenStdinProxy Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MGT::Util::PopenStdinProxy" -->
<p><a href="classMGT_1_1Util_1_1PopenStdinProxy-members.html">List of all members.</a></p>
<table class="memberdecls">
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment">Proxy class to use in place of Popen.stdin - it makes sure than after stdin.close(), .wait() is called on the subprocess.
When Python exits, it apparently terminates still running subprocesses (maybe SGE does it - I only observed the issue in
batch execution. In particular, when we call .close() on a pipe to gzip subprocess writer, it takes some time for gzip
to finish writing. It our application exits immediately, gzip is killed leaving unfinished output file.
This proxy class holds a reference to the Popen instance and delegates all attribute lookups to Popen's stdin file object,
except for the .close() method, in which it first closes the stream, and then waits for the child process to finish.
This is not ideal solution because Popen.stdin is a real built-in file object, and this proxy class is not. Thus, some
code that e.g. uses Python C Api can choke on it. Another alternative would be to keep a global list of all Popen
objects and wait on them in atexit() handler.
</pre></div> <hr/>The documentation for this class was generated from the following file:<ul>
<li>mgtaxa/MGT/Util.py</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jan 20 2011 17:14:47 for Mgtaxa by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
