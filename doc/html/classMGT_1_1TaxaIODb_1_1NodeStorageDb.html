<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mgtaxa: MGT::TaxaIODb::NodeStorageDb Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><b>MGT</b>      </li>
      <li><b>TaxaIODb</b>      </li>
      <li><a class="el" href="classMGT_1_1TaxaIODb_1_1NodeStorageDb.html">NodeStorageDb</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<h1>MGT::TaxaIODb::NodeStorageDb Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MGT::TaxaIODb::NodeStorageDb" -->
<p><a href="classMGT_1_1TaxaIODb_1_1NodeStorageDb-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1TaxaIODb_1_1NodeStorageDb.html#a214b285535750e049d95cbc10ee7858d">loadAttribute</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1TaxaIODb_1_1NodeStorageDb.html#a1fe17a7d9f1d5dd9144fa0d37d0bee4a">saveAttributes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1TaxaIODb_1_1NodeStorageDb.html#abc0826a992636fe4b0edc0c14aeccbf0">loadSeqLen</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1TaxaIODb_1_1NodeStorageDb.html#ac6c44460df4ce794c90f1c20ed4e9a3c">tblNames</a> = &quot;taxa_names&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently, we consider taxa names immutable and originating from the initial NCBI taxonomy dump file, so load them from a fixed DB table named by 'tblNames'.  <a href="#ac6c44460df4ce794c90f1c20ed4e9a3c"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment">Taxonomy nodes storage in SQL DB</pre></div> <hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a214b285535750e049d95cbc10ee7858d"></a><!-- doxytag: member="MGT::TaxaIODb::NodeStorageDb::loadAttribute" ref="a214b285535750e049d95cbc10ee7858d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::TaxaIODb::NodeStorageDb::loadAttribute </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>default</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>setDefault</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>ignoreKeyError</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>typeCast</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Execute 'sql' which should return a unique mapping taxid -&gt; value and assign result to each node.
@param name - name of the new treee nodee attribbute to set
@param sql - statement to execute. It must return (id,value) pairs (in that order) with 'id' corresponding to tree node id's.
Actual column names do not matter.
@param default - assign this value to those nodes for which taxid is not present in the 'sql' result set (if 'setDeafult' is True)
@param setDefault - if False, do not assign default value to nodes
@param ignoreKeyError - if True, do not raise exception if 'sql' results set contains an id that is not present in the tree.
</pre></div> 
</div>
</div>
<a class="anchor" id="abc0826a992636fe4b0edc0c14aeccbf0"></a><!-- doxytag: member="MGT::TaxaIODb::NodeStorageDb::loadSeqLen" ref="abc0826a992636fe4b0edc0c14aeccbf0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::TaxaIODb::NodeStorageDb::loadSeqLen </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em> = <code>&quot;seq_len&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em> = <code>&quot;select&#160;taxid</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>seq_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>taxa_seq_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Load sequence length from DB and also assign accumulated subtree sequence to attribute name+'_tot'
Parameters have the same meaning as for for loadAttribute().
Default value of 0L is used.</pre></div> 
</div>
</div>
<a class="anchor" id="a1fe17a7d9f1d5dd9144fa0d37d0bee4a"></a><!-- doxytag: member="MGT::TaxaIODb::NodeStorageDb::saveAttributes" ref="a1fe17a7d9f1d5dd9144fa0d37d0bee4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::TaxaIODb::NodeStorageDb::saveAttributes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>nameToSql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Save attribute values of tree nodes as a new table indexed by node id.
@param tree - tree to work on
@nameToSql - mapping of attribute names into SQL, by example: {'rankUpper':{'name':'rank_upper','type':'char(20)','createIndex':True,default=0}}. If 'name' is not present, the key of the dictionary will be used as is for SQL column
name. That might lead to problems if SQL server converts all names to lower case, for instance. It is not a good
idea to rely on identifier case in SQL code anyway.
@param table - SQL table name to create
</pre></div> 
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac6c44460df4ce794c90f1c20ed4e9a3c"></a><!-- doxytag: member="MGT::TaxaIODb::NodeStorageDb::tblNames" ref="ac6c44460df4ce794c90f1c20ed4e9a3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="classMGT_1_1TaxaIODb_1_1NodeStorageDb.html#ac6c44460df4ce794c90f1c20ed4e9a3c">MGT::TaxaIODb::NodeStorageDb::tblNames</a> = &quot;taxa_names&quot;<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Currently, we consider taxa names immutable and originating from the initial NCBI taxonomy dump file, so load them from a fixed DB table named by 'tblNames'. </p>
<p>This assumes that all other trees that we construct are reductions of that original NCBI tree. This might change in the future, in which case we will use specific name table for each tree. It will still make sense to keep the names in a separate table because they are long and rarely needed strings. Currently we just expect the 'tblNames' to be loaded into the database already. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>mgtaxa/MGT/TaxaIODb.py</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jan 20 2011 17:14:46 for Mgtaxa by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
