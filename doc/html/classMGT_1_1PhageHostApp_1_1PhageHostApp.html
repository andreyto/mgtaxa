<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Mgtaxa: MGT::PhageHostApp::PhageHostApp Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>MGT</b>::<b>PhageHostApp</b>::<a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html">PhageHostApp</a></div>
<h1>MGT::PhageHostApp::PhageHostApp Class Reference</h1><!-- doxytag: class="MGT::PhageHostApp::PhageHostApp" --><a href="classMGT_1_1PhageHostApp_1_1PhageHostApp-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#087fd7156031a8e58007f50aabd2c576">loadPhageHostDb</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#35d464a7d5cd467b0778221832eb1fca">buildDbPhageHost</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#d8a150c805adb67ad0bc281bf3bee77d">selectPhageHostPairsTmp</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#395b30b4dd31b29c9555f4858e4f964a">selectPhageHostPairs</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#a621a1f19bc89a1ce6e8c649f2c5e3f5">predict</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#17ab11d9cfd072b33f9cc2536f91ba2c">_maskScoresNonSubtrees</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#b82f3a13cc6209a857e9decccf3b14c8">_maskScoresByRanks</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#d5e4a83fb23ffb10d5c94f4c3b759023">_taxaTopScores</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#0bae38f2a216c339e5459b90820c3e9e">processImmScores</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#611b17042dec3e7f1e61ffa1ba093be9">performance</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#aa4958e27baa32485ebeeba69f99b268">getVirToHostPicked</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1PhageHostApp_1_1PhageHostApp.html#ebbb688671be395a4701e8e5012b9405">processPhymmScores</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment">App-derived class for phage-host assignment</pre></div> 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b82f3a13cc6209a857e9decccf3b14c8"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::_maskScoresByRanks" ref="b82f3a13cc6209a857e9decccf3b14c8" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::_maskScoresByRanks           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>taxaTree</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>immScores</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Set to a negative infinity (numpy.NINF) all columns in score matrix that point to nodes of ranks not in desired range.
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="17ab11d9cfd072b33f9cc2536f91ba2c"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::_maskScoresNonSubtrees" ref="17ab11d9cfd072b33f9cc2536f91ba2c" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::_maskScoresNonSubtrees           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>taxaTree</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>immScores</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>posRoots</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Set to a negative infinity (numpy.NINF) all columns in score matrix that point to NOT subtrees of posRoots nodes.
This is used to mask all scores pointing to other than bacteria or archaea when we are assigning hosts to viruses</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="d5e4a83fb23ffb10d5c94f4c3b759023"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::_taxaTopScores" ref="d5e4a83fb23ffb10d5c94f4c3b759023" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::_taxaTopScores           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>taxaTree</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>immScores</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>topScoreN</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Get TaxaTree nodes of topScoreN scores for each sample.
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="35d464a7d5cd467b0778221832eb1fca"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::buildDbPhageHost" ref="35d464a7d5cd467b0778221832eb1fca" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::buildDbPhageHost           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>self</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Collect and save data about phage-host associations in RefSeq</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="aa4958e27baa32485ebeeba69f99b268"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::getVirToHostPicked" ref="aa4958e27baa32485ebeeba69f99b268" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::getVirToHostPicked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>self</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Return {virNode-&gt;host} map from a DB of picked vir-host pairs</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="087fd7156031a8e58007f50aabd2c576"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::loadPhageHostDb" ref="087fd7156031a8e58007f50aabd2c576" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::loadPhageHostDb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>self</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Load and map Phage-Host DB into the taxaTree</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="611b17042dec3e7f1e61ffa1ba093be9"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::performance" ref="611b17042dec3e7f1e61ffa1ba093be9" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::performance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>kw</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Evaluate the performance of predicting host taxonomy on the DB of known pairs.
Parameters are taken from self.opt.
@param predOutTaxa File with predicted taxa
@param perfOutTaxa Output file with performance metrics
@param predIdLab IdLabels file for the samples
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="a621a1f19bc89a1ce6e8c649f2c5e3f5"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::predict" ref="a621a1f19bc89a1ce6e8c649f2c5e3f5" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::predict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>kw</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Predict host taxonomy for viral sequences.
Parameters are taken from self.opt.
@param predSeq Name of FASTA sequence file to classify
@param immDb Path to directory with IMMs
@param predOutDir Output directory for predictions
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="0bae38f2a216c339e5459b90820c3e9e"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::processImmScores" ref="0bae38f2a216c339e5459b90820c3e9e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::processImmScores           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>kw</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Process raw IMM scores to predict host taxonomy for viral sequences.
Parameters are taken from self.opt.
@param outScoreComb File with ImmScores object
@param predOutTaxa Output file with predicted taxa
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="ebbb688671be395a4701e8e5012b9405"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::processPhymmScores" ref="ebbb688671be395a4701e8e5012b9405" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::processPhymmScores           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname" nowrap> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>kw</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Load Phymm predictions to use as a reference implementation.
Parameters are taken from self.opt.
@param outPhymm File with Phymm output
@param predOutTaxa Output file with predicted taxa
</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="395b30b4dd31b29c9555f4858e4f964a"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::selectPhageHostPairs" ref="395b30b4dd31b29c9555f4858e4f964a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::selectPhageHostPairs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>self</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Pick pairs of phages and hosts from p-h DB stratified at a genus level</pre></div>     </td>
  </tr>
</table>
<a class="anchor" name="d8a150c805adb67ad0bc281bf3bee77d"></a><!-- doxytag: member="MGT::PhageHostApp::PhageHostApp::selectPhageHostPairsTmp" ref="d8a150c805adb67ad0bc281bf3bee77d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">def MGT::PhageHostApp::PhageHostApp::selectPhageHostPairsTmp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>self</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">Pick pairs of phages and hosts from p-h DB stratified at a genus level</pre></div>     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>mgtaxa/MGT/PhageHostApp.py</ul>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 8 15:32:20 2010 for Mgtaxa by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
