<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mgtaxa: MGT::Sql::DbSql Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><b>MGT</b>      </li>
      <li><b>Sql</b>      </li>
      <li><a class="el" href="classMGT_1_1Sql_1_1DbSql.html">DbSql</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<h1>MGT::Sql::DbSql Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MGT::Sql::DbSql" --><!-- doxytag: inherits="MGT::Config::MGTOptions" --><!-- startSectionHeader --><div class="dynheader">
Inheritance diagram for MGT::Sql::DbSql:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
 <div class="center">
  <img src="classMGT_1_1Sql_1_1DbSql.png" usemap="#MGT::Sql::DbSql_map" alt=""/>
  <map id="MGT::Sql::DbSql_map" name="MGT::Sql::DbSql_map">
<area href="classMGT_1_1Sql_1_1DbSqlLite.html" alt="MGT::Sql::DbSqlLite" shape="rect" coords="0,56,136,80"/>
<area href="classMGT_1_1Sql_1_1DbSqlMonet.html" alt="MGT::Sql::DbSqlMonet" shape="rect" coords="146,56,282,80"/>
<area href="classMGT_1_1Sql_1_1DbSqlMy.html" alt="MGT::Sql::DbSqlMy" shape="rect" coords="292,56,428,80"/>
</map>
 </div><!-- endSectionContent --></div>

<p><a href="classMGT_1_1Sql_1_1DbSql-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a2b3b088a94f149c3e03d18299fe8cd91">getTableDescr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a1e45902fc59b10a7645b8fc7eef2254e">selectAll</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a9f011b18e23de9073b90a8fa2337e9f8">selectScalar</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a09075768e3474815b357c4f038d6305b">selectAsNx1Dict</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a996ae7f261cdbb8ff9786091335be6ad">selectAs1Col</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#aa00fdd8d7e08fb099468635ed32d19e0">dropIndex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a20302bf3f946120afeaa8ca03df9157f">createIndices</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#ad58307fb0acab6e6cbcafaf34f8715b7">createTableAs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a88bd17cf741c3d3a781aa3b0b38e3d8d">saveRecords</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#ae53d62af3522cec8140687a0d0cc3bda">createTableFromArray</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#ac320d7ab2a7c032e28f5b100298285e0">createTableFromCsv</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a810d0055a6530184dbd3ee7958897d97">selectAsArray</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#a7ab632494867c898d4561e18c5555f34">exportAsCsv</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2ebe1f092c0ce23929df818d4ca7e69"></a><!-- doxytag: member="MGT::Sql::DbSql::defField" ref="af2ebe1f092c0ce23929df818d4ca7e69" args="" -->
tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMGT_1_1Sql_1_1DbSql.html#af2ebe1f092c0ce23929df818d4ca7e69">defField</a> = <a class="el" href="classMGT_1_1Sql_1_1SqlField.html">SqlField</a>(name=&quot;fld&quot;,type=&quot;char(40)&quot;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default SQL field definition - a fall-back field type to create when nothing more specific is provided by the user. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment">Wrapper around DB-API Connection class with some convenience methods.
@todo Convert this to using SQL Alchemy. SQL Alchemy imposed too big abstraction penalty in the past,
but this might not be the case anymore assuming carefully following its best use practices.
We will still likely to need our bulk loading methods.
</pre></div> <hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a20302bf3f946120afeaa8ca03df9157f"></a><!-- doxytag: member="MGT::Sql::DbSql::createIndices" ref="a20302bf3f946120afeaa8ca03df9157f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::createIndices </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">We always create and drop indices as tablename_indexname because in some DBMS (MonetDB) index names should be globally unique.
This can be specialized for MySQL and others that support ALTER TABLE ... ADD INDEX ... ADD INDEX</pre></div> 
<p>Reimplemented in <a class="el" href="classMGT_1_1Sql_1_1DbSqlMonet.html#af113314feec870b24ad261e6712b0b0b">MGT::Sql::DbSqlMonet</a>.</p>

</div>
</div>
<a class="anchor" id="ad58307fb0acab6e6cbcafaf34f8715b7"></a><!-- doxytag: member="MGT::Sql::DbSql::createTableAs" ref="ad58307fb0acab6e6cbcafaf34f8715b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::createTableAs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>indices</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Save the results of SQL SELECT as a new table.
This abstracts "create ... as ..." operation from minor differences in SQL dialects.
For example, MonetDB Feb2008 required 'with data' at the end, MySQL 5 and SQLite do 
not recognize 'with data'
Override in derived classes if necessary.
@param name name of table to (re-)create - existing table will be replaced
@param select SQL select statement
@param indices if present, will be passed to createIndices() method
</pre></div> 
<p>Reimplemented in <a class="el" href="classMGT_1_1Sql_1_1DbSqlMonet.html#a73ffc576f9f953f5f9a83672933a4883">MGT::Sql::DbSqlMonet</a>.</p>

</div>
</div>
<a class="anchor" id="ae53d62af3522cec8140687a0d0cc3bda"></a><!-- doxytag: member="MGT::Sql::DbSql::createTableFromArray" ref="ae53d62af3522cec8140687a0d0cc3bda" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::createTableFromArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>withData</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>returnInserter</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>indices</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Create a table that reflects the fields of Numpy record array.
@return BulkInserter object or None
@param name The name of the new table
@param arr Numpy array to use as template
@param withData if True, also load data from array
@param returnInserter if True, return a BulkInserter object; 
The caller then is resposible for closing the inserter object.
@param indices, if not None, should be a dictionary with arguments to createIndices, 
except the 'table' argument, which will be taken from 'name'.
All fields are constrained as NOT NULL, as Numpy does not have NULL values,
and NOT NULL constraint speeds up queries.
</pre></div> 
</div>
</div>
<a class="anchor" id="ac320d7ab2a7c032e28f5b100298285e0"></a><!-- doxytag: member="MGT::Sql::DbSql::createTableFromCsv" ref="ac320d7ab2a7c032e28f5b100298285e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::createTableFromCsv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>csvFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>fieldsMap</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>defField</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>hasHeader</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>dialect</em> = <code>&quot;excel-tab&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>dialect_options</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>indices</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>preProc</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Create and fill a table from CSV file.
The intention is to provide a single command to load a CSV file into SQL table
where reasonable default values can be generated for all options.
@param name The name of the new table
@param csv Either a file name, in which case csv.reader(openCompresed(),dialect=dialect) 
will be used to open the file, or it should be an existing file stream, or csv.reader object
(in the latter case dialect and dialect_options parameters are ignored).
@param fieldsMap A dictionary that either maps field position to SqlField instances
(if hasHeader is False) or maps field names to SqlField instances (if hasHeader is True).
In the latter case, each SqlField instance can replace the name from the header, or leave the
name as None, in which case the name supplied by the header will be used.
@param defField SqlField instance to generate default SQL definitions for fields not
mapped by fieldsMap. If hasHeader is False, defField.name will be used as a 
prefix, such that the field name becomes prefix_xxx where xxx is the absolute field 
position in CSV row. Otherwise, defField.name is ignored, and only the other attributes are
used to define default field type etc.
@param hasHeader tells whether to treat the first row of CSV file as header
@param dialect Dialect string defined in csv module
@param dialect_options Passed to csv.reader(**dialect_options)
@param indices, if not None, should be a dictionary with arguments to createIndices, 
except the 'table' argument, which will be taken from 'name'
@param preProc If specified, this should be a method that will be applied to each
row returned by csv.reader. The method must return a sequence (possibly empty) of new
rows, which will be inserted into SQL table instead of the original row. Their size and
types must match the original row. The preProc must have this signature:
preProc(row,fields,nameToInd) where row is returned by csv.reader.next(); fields is a list
of SqlField objects matching the row fields; nameToInd is a dictionary mapping field names
to indexes of fields in the row. The last two parameters allow preProc's code to access row
elements by field names, e.g. row[nameToInd["seqid"]]. The preProc parameter addresses a common
use case where the input file is very large but we need to load into the SQL DB only a small
subset of it for which a simple filter condition exists such as set membership. It also covers
simple manipulation of input data such as various string substitutions.
Example:
preProc = lambda row,fields,nameToInd,idSet=set(1,2,3): \
( row, ) if row[namesToInd["seqId"]] in idSet else (,)
createTableFromCsv(...,preProc=preProc)
</pre></div> 
</div>
</div>
<a class="anchor" id="aa00fdd8d7e08fb099468635ed32d19e0"></a><!-- doxytag: member="MGT::Sql::DbSql::dropIndex" ref="aa00fdd8d7e08fb099468635ed32d19e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::dropIndex </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>rawName</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">We always create and drop indices as tablename_indexname because in some DBMS (MonetDB) index names should be globally unique.</pre></div> 
<p>Reimplemented in <a class="el" href="classMGT_1_1Sql_1_1DbSqlMonet.html#ad56737c06dea938ceb3e29002853f472">MGT::Sql::DbSqlMonet</a>.</p>

</div>
</div>
<a class="anchor" id="a7ab632494867c898d4561e18c5555f34"></a><!-- doxytag: member="MGT::Sql::DbSql::exportAsCsv" ref="a7ab632494867c898d4561e18c5555f34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::exportAsCsv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>withHeader</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>bufLen</em> = <code>100000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>dialect</em> = <code>&quot;excel-tab&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>dialect_options</em> = <code>{&quot;lineterminator&quot;:&quot;\n&quot;}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>comment</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sqlAsComment</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>commentEscape</em> = <code>'#'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>epilog</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Excecute SQL and export the result as CSV file.
@param sql SQL select statement to export results of
@param out Either file name, or file stream object, or CSV writer object
@param withHeader If True, write the field names as the header
@param bufLen Size (in number of records) of the internal memory buffer
used when moving SQL result set into the output file
@param dialect Dialect string defined in csv module
@param dialect_options Passed to csv.writer(**dialect_options)
@param comment if not None, this string will be printed at the top
@param sqlAsComment if True, will print sql statement as an extra comment line
@param commentEscape this string will be inserted at the start of every
comment line
@note To output any comments, out should not be a csv.writer instance
@note We set the default lineterminator to Linux style '\n', as opposed to 
Python's default of Windows style '\r\n'</pre></div> 
</div>
</div>
<a class="anchor" id="a2b3b088a94f149c3e03d18299fe8cd91"></a><!-- doxytag: member="MGT::Sql::DbSql::getTableDescr" ref="a2b3b088a94f149c3e03d18299fe8cd91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::getTableDescr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Return table description as seen by DB API module</pre></div> 
</div>
</div>
<a class="anchor" id="a88bd17cf741c3d3a781aa3b0b38e3d8d"></a><!-- doxytag: member="MGT::Sql::DbSql::saveRecords" ref="a88bd17cf741c3d3a781aa3b0b38e3d8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::saveRecords </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Create a new table and save records into it.
@param records - iterable with each element been a sequence of field values itself
@param table - instance of SqlTable description class</pre></div> 
</div>
</div>
<a class="anchor" id="a1e45902fc59b10a7645b8fc7eef2254e"></a><!-- doxytag: member="MGT::Sql::DbSql::selectAll" ref="a1e45902fc59b10a7645b8fc7eef2254e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::selectAll </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Convenience method that does for select statement and execute+fetchall in one step.
Use for statements with small result set.
@param sql SQL SELECT statement
@return result of cursor.fetchall (sequence of tuples)</pre></div> 
</div>
</div>
<a class="anchor" id="a996ae7f261cdbb8ff9786091335be6ad"></a><!-- doxytag: member="MGT::Sql::DbSql::selectAs1Col" ref="a996ae7f261cdbb8ff9786091335be6ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::selectAs1Col </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Execute sql that must return one column and return result as 1D sequence.</pre></div> 
</div>
</div>
<a class="anchor" id="a810d0055a6530184dbd3ee7958897d97"></a><!-- doxytag: member="MGT::Sql::DbSql::selectAsArray" ref="a810d0055a6530184dbd3ee7958897d97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::selectAsArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Execute SQL select and return the entire result set as Numpy record array.</pre></div> 
</div>
</div>
<a class="anchor" id="a09075768e3474815b357c4f038d6305b"></a><!-- doxytag: member="MGT::Sql::DbSql::selectAsNx1Dict" ref="a09075768e3474815b357c4f038d6305b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::selectAsNx1Dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Execute sql that must return two columns with Nx1 relation and return result as dict(first-&gt;second).</pre></div> 
</div>
</div>
<a class="anchor" id="a9f011b18e23de9073b90a8fa2337e9f8"></a><!-- doxytag: member="MGT::Sql::DbSql::selectScalar" ref="a9f011b18e23de9073b90a8fa2337e9f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def MGT::Sql::DbSql::selectScalar </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Execute sql that must return a single row with a single column and return result as scalar value.</pre></div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>mgtaxa/MGT/Sql.py</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jan 20 2011 17:14:45 for Mgtaxa by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
