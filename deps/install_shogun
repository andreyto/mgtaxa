#!/bin/sh

## I installed Atlas from sources.
## Swig in CentOS 5 is too old to build with python 2.5. Installed swig from sources.

## ./configure script is very rough. It ignores LDFLAGS, the only way to inject -W,l options is to pass
## them to --libs argument, which adds '-L' prefix to them, so the value must start with a true directory,
## w/o the -L (see below).
## ./configure also forgets to add libdl and libutil, which results in missing symbols and configure error exit.

## Attempt to build with --disable-atlas (with built-in blas support) resulted in more 'make tests' errors.
## In particular, liblinear module got disabled completely.

## It seems the configure cannot find my atlas when built on CentOS

make distclean
./configure --prefix=$INSTMACH --interface=python-modular --cflags="$CFLAGS" --cxxflags="$CXXFLAGS" --libs="$INST_LIB_MACH $LDFLAGS -ldl -lutil -latlas -lcblas -lgfortran" && \
make && \
make install && \
make doc && \
make tests

